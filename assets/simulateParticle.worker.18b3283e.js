var pr=Object.defineProperty;var Rr=(O,F,C)=>F in O?pr(O,F,{enumerable:!0,configurable:!0,writable:!0,value:C}):O[F]=C;var c=(O,F,C)=>(Rr(O,typeof F!="symbol"?F+"":F,C),C);(function(){"use strict";var O=(t=>(t[t.R8G8B8A8_UBYTE=0]="R8G8B8A8_UBYTE",t[t.R32_SFLOAT=1]="R32_SFLOAT",t[t.R32G32_SFLOAT=2]="R32G32_SFLOAT",t[t.R32G32B32_SFLOAT=3]="R32G32B32_SFLOAT",t[t.R32G32B32A32_SFLOAT=4]="R32G32B32A32_SFLOAT",t[t.Format_Num=5]="Format_Num",t))(O||{});function F(t,e){return function(){return t.apply(e,arguments)}}const{toString:C}=Object.prototype,{getPrototypeOf:ne}=Object,j=(t=>e=>{const r=C.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),w=t=>(t=t.toLowerCase(),e=>j(e)===t),z=t=>e=>typeof e===t,{isArray:U}=Array,I=z("undefined");function Ze(t){return t!==null&&!I(t)&&t.constructor!==null&&!I(t.constructor)&&B(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const be=w("ArrayBuffer");function et(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&be(t.buffer),e}const tt=z("string"),B=z("function"),Be=z("number"),W=t=>t!==null&&typeof t=="object",rt=t=>t===!0||t===!1,H=t=>{if(j(t)!=="object")return!1;const e=ne(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},nt=w("Date"),it=w("File"),st=w("Blob"),at=w("FileList"),ot=t=>W(t)&&B(t.pipe),ut=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||B(t.append)&&((e=j(t))==="formdata"||e==="object"&&B(t.toString)&&t.toString()==="[object FormData]"))},lt=w("URLSearchParams"),ft=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function k(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),U(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const s=r?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let u;for(n=0;n<a;n++)u=s[n],e.call(null,t[u],u,t)}}function _e(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const Fe=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),we=t=>!I(t)&&t!==Fe;function ie(){const{caseless:t}=we(this)&&this||{},e={},r=(n,i)=>{const s=t&&_e(e,i)||i;H(e[s])&&H(n)?e[s]=ie(e[s],n):H(n)?e[s]=ie({},n):U(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&k(arguments[n],r);return e}const ct=(t,e,r,{allOwnKeys:n}={})=>(k(e,(i,s)=>{r&&B(i)?t[s]=F(i,r):t[s]=i},{allOwnKeys:n}),t),ht=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),dt=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},mt=(t,e,r,n)=>{let i,s,a;const u={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!n||n(a,t,e))&&!u[a]&&(e[a]=t[a],u[a]=!0);t=r!==!1&&ne(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},pt=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},Rt=t=>{if(!t)return null;if(U(t))return t;let e=t.length;if(!Be(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},yt=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ne(Uint8Array)),At=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},gt=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},Et=w("HTMLFormElement"),xt=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),Se=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Tt=w("RegExp"),Oe=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};k(r,(i,s)=>{e(i,s,t)!==!1&&(n[s]=i)}),Object.defineProperties(t,n)},bt=t=>{Oe(t,(e,r)=>{if(B(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(!!B(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Bt=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return U(t)?n(t):n(String(t).split(e)),r},_t=()=>{},Ft=(t,e)=>(t=+t,Number.isFinite(t)?t:e),se="abcdefghijklmnopqrstuvwxyz",Le="0123456789",Ne={DIGIT:Le,ALPHA:se,ALPHA_DIGIT:se+se.toUpperCase()+Le},wt=(t=16,e=Ne.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function St(t){return!!(t&&B(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Ot=t=>{const e=new Array(10),r=(n,i)=>{if(W(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=U(n)?[]:{};return k(n,(a,u)=>{const h=r(a,i+1);!I(h)&&(s[u]=h)}),e[i]=void 0,s}}return n};return r(t,0)},Lt=w("AsyncFunction");var l={isArray:U,isArrayBuffer:be,isBuffer:Ze,isFormData:ut,isArrayBufferView:et,isString:tt,isNumber:Be,isBoolean:rt,isObject:W,isPlainObject:H,isUndefined:I,isDate:nt,isFile:it,isBlob:st,isRegExp:Tt,isFunction:B,isStream:ot,isURLSearchParams:lt,isTypedArray:yt,isFileList:at,forEach:k,merge:ie,extend:ct,trim:ft,stripBOM:ht,inherits:dt,toFlatObject:mt,kindOf:j,kindOfTest:w,endsWith:pt,toArray:Rt,forEachEntry:At,matchAll:gt,isHTMLForm:Et,hasOwnProperty:Se,hasOwnProp:Se,reduceDescriptors:Oe,freezeMethods:bt,toObjectSet:Bt,toCamelCase:xt,noop:_t,toFiniteNumber:Ft,findKey:_e,global:Fe,isContextDefined:we,ALPHABET:Ne,generateString:wt,isSpecCompliantForm:St,toJSONObject:Ot,isAsyncFn:Lt,isThenable:t=>t&&(W(t)||B(t))&&B(t.then)&&B(t.catch)};function y(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}l.inherits(y,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:l.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const De=y.prototype,Ce={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ce[t]={value:t}}),Object.defineProperties(y,Ce),Object.defineProperty(De,"isAxiosError",{value:!0}),y.from=(t,e,r,n,i,s)=>{const a=Object.create(De);return l.toFlatObject(t,a,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),y.call(a,t.message,e,r,n,i),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};var Nt=null;function ae(t){return l.isPlainObject(t)||l.isArray(t)}function Ue(t){return l.endsWith(t,"[]")?t.slice(0,-2):t}function Pe(t,e,r){return t?t.concat(e).map(function(i,s){return i=Ue(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function Dt(t){return l.isArray(t)&&!t.some(ae)}const Ct=l.toFlatObject(l,{},null,function(e){return/^is[A-Z]/.test(e)});function X(t,e,r){if(!l.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=l.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,N){return!l.isUndefined(N[R])});const n=r.metaTokens,i=r.visitor||d,s=r.dots,a=r.indexes,h=(r.Blob||typeof Blob<"u"&&Blob)&&l.isSpecCompliantForm(e);if(!l.isFunction(i))throw new TypeError("visitor must be a function");function f(m){if(m===null)return"";if(l.isDate(m))return m.toISOString();if(!h&&l.isBlob(m))throw new y("Blob is not supported. Use a Buffer instead.");return l.isArrayBuffer(m)||l.isTypedArray(m)?h&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,R,N){let _=m;if(m&&!N&&typeof m=="object"){if(l.endsWith(R,"{}"))R=n?R:R.slice(0,-2),m=JSON.stringify(m);else if(l.isArray(m)&&Dt(m)||(l.isFileList(m)||l.endsWith(R,"[]"))&&(_=l.toArray(m)))return R=Ue(R),_.forEach(function(re,mr){!(l.isUndefined(re)||re===null)&&e.append(a===!0?Pe([R],mr,s):a===null?R:R+"[]",f(re))}),!1}return ae(m)?!0:(e.append(Pe(N,R,s),f(m)),!1)}const p=[],x=Object.assign(Ct,{defaultVisitor:d,convertValue:f,isVisitable:ae});function A(m,R){if(!l.isUndefined(m)){if(p.indexOf(m)!==-1)throw Error("Circular reference detected in "+R.join("."));p.push(m),l.forEach(m,function(_,M){(!(l.isUndefined(_)||_===null)&&i.call(e,_,l.isString(M)?M.trim():M,R,x))===!0&&A(_,R?R.concat(M):[M])}),p.pop()}}if(!l.isObject(t))throw new TypeError("data must be an object");return A(t),e}function Me(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function oe(t,e){this._pairs=[],t&&X(t,this,e)}const Ie=oe.prototype;Ie.append=function(e,r){this._pairs.push([e,r])},Ie.toString=function(e){const r=e?function(n){return e.call(this,n,Me)}:Me;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function Ut(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ke(t,e,r){if(!e)return t;const n=r&&r.encode||Ut,i=r&&r.serialize;let s;if(i?s=i(e,r):s=l.isURLSearchParams(e)?e.toString():new oe(e,r).toString(n),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Pt{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){l.forEach(this.handlers,function(n){n!==null&&e(n)})}}var Ve=Pt,ve={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Mt=typeof URLSearchParams<"u"?URLSearchParams:oe,It=typeof FormData<"u"?FormData:null,kt=typeof Blob<"u"?Blob:null;const Vt=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),vt=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")();var S={isBrowser:!0,classes:{URLSearchParams:Mt,FormData:It,Blob:kt},isStandardBrowserEnv:Vt,isStandardBrowserWebWorkerEnv:vt,protocols:["http","https","file","blob","url","data"]};function Gt(t,e){return X(t,new S.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,s){return S.isNode&&l.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function jt(t){return l.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function zt(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function Ge(t){function e(r,n,i,s){let a=r[s++];const u=Number.isFinite(+a),h=s>=r.length;return a=!a&&l.isArray(i)?i.length:a,h?(l.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!u):((!i[a]||!l.isObject(i[a]))&&(i[a]=[]),e(r,n,i[a],s)&&l.isArray(i[a])&&(i[a]=zt(i[a])),!u)}if(l.isFormData(t)&&l.isFunction(t.entries)){const r={};return l.forEachEntry(t,(n,i)=>{e(jt(n),i,r,0)}),r}return null}const Wt={"Content-Type":void 0};function Ht(t,e,r){if(l.isString(t))try{return(e||JSON.parse)(t),l.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Y={transitional:ve,adapter:["xhr","http"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=l.isObject(e);if(s&&l.isHTMLForm(e)&&(e=new FormData(e)),l.isFormData(e))return i&&i?JSON.stringify(Ge(e)):e;if(l.isArrayBuffer(e)||l.isBuffer(e)||l.isStream(e)||l.isFile(e)||l.isBlob(e))return e;if(l.isArrayBufferView(e))return e.buffer;if(l.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Gt(e,this.formSerializer).toString();if((u=l.isFileList(e))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return X(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),Ht(e)):e}],transformResponse:[function(e){const r=this.transitional||Y.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&l.isString(e)&&(n&&!this.responseType||i)){const a=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(a)throw u.name==="SyntaxError"?y.from(u,y.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:S.classes.FormData,Blob:S.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};l.forEach(["delete","get","head"],function(e){Y.headers[e]={}}),l.forEach(["post","put","patch"],function(e){Y.headers[e]=l.merge(Wt)});var ue=Y;const Xt=l.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Yt=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),r=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!r||e[r]&&Xt[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e};const je=Symbol("internals");function V(t){return t&&String(t).trim().toLowerCase()}function K(t){return t===!1||t==null?t:l.isArray(t)?t.map(K):String(t)}function Kt(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const qt=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function le(t,e,r,n,i){if(l.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!l.isString(e)){if(l.isString(n))return e.indexOf(n)!==-1;if(l.isRegExp(n))return n.test(e)}}function Jt(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function $t(t,e){const r=l.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,a){return this[n].call(this,e,i,s,a)},configurable:!0})})}class q{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(u,h,f){const d=V(h);if(!d)throw new Error("header name must be a non-empty string");const p=l.findKey(i,d);(!p||i[p]===void 0||f===!0||f===void 0&&i[p]!==!1)&&(i[p||h]=K(u))}const a=(u,h)=>l.forEach(u,(f,d)=>s(f,d,h));return l.isPlainObject(e)||e instanceof this.constructor?a(e,r):l.isString(e)&&(e=e.trim())&&!qt(e)?a(Yt(e),r):e!=null&&s(r,e,n),this}get(e,r){if(e=V(e),e){const n=l.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return Kt(i);if(l.isFunction(r))return r.call(this,i,n);if(l.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=V(e),e){const n=l.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||le(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(a){if(a=V(a),a){const u=l.findKey(n,a);u&&(!r||le(n,n[u],u,r))&&(delete n[u],i=!0)}}return l.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||le(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return l.forEach(this,(i,s)=>{const a=l.findKey(n,s);if(a){r[a]=K(i),delete r[s];return}const u=e?Jt(s):String(s).trim();u!==s&&delete r[s],r[u]=K(i),n[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return l.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&l.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[je]=this[je]={accessors:{}}).accessors,i=this.prototype;function s(a){const u=V(a);n[u]||($t(i,a),n[u]=!0)}return l.isArray(e)?e.forEach(s):s(e),this}}q.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),l.freezeMethods(q.prototype),l.freezeMethods(q);var L=q;function fe(t,e){const r=this||ue,n=e||r,i=L.from(n.headers);let s=n.data;return l.forEach(t,function(u){s=u.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function ze(t){return!!(t&&t.__CANCEL__)}function v(t,e,r){y.call(this,t==null?"canceled":t,y.ERR_CANCELED,e,r),this.name="CanceledError"}l.inherits(v,y,{__CANCEL__:!0});function Qt(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new y("Request failed with status code "+r.status,[y.ERR_BAD_REQUEST,y.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}var Zt=S.isStandardBrowserEnv?function(){return{write:function(r,n,i,s,a,u){const h=[];h.push(r+"="+encodeURIComponent(n)),l.isNumber(i)&&h.push("expires="+new Date(i).toGMTString()),l.isString(s)&&h.push("path="+s),l.isString(a)&&h.push("domain="+a),u===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(r){const n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function er(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function tr(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function We(t,e){return t&&!er(e)?tr(t,e):e}var rr=S.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function i(s){let a=s;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(a){const u=l.isString(a)?i(a):a;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}();function nr(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function ir(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(h){const f=Date.now(),d=n[s];a||(a=f),r[i]=h,n[i]=f;let p=s,x=0;for(;p!==i;)x+=r[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),f-a<e)return;const A=d&&f-d;return A?Math.round(x*1e3/A):void 0}}function He(t,e){let r=0;const n=ir(50,250);return i=>{const s=i.loaded,a=i.lengthComputable?i.total:void 0,u=s-r,h=n(u),f=s<=a;r=s;const d={loaded:s,total:a,progress:a?s/a:void 0,bytes:u,rate:h||void 0,estimated:h&&a&&f?(a-s)/h:void 0,event:i};d[e?"download":"upload"]=!0,t(d)}}var sr=typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(r,n){let i=t.data;const s=L.from(t.headers).normalize(),a=t.responseType;let u;function h(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}l.isFormData(i)&&(S.isStandardBrowserEnv||S.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let f=new XMLHttpRequest;if(t.auth){const A=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(A+":"+m))}const d=We(t.baseURL,t.url);f.open(t.method.toUpperCase(),ke(d,t.params,t.paramsSerializer),!0),f.timeout=t.timeout;function p(){if(!f)return;const A=L.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:A,config:t,request:f};Qt(function(_){r(_),h()},function(_){n(_),h()},R),f=null}if("onloadend"in f?f.onloadend=p:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(p)},f.onabort=function(){!f||(n(new y("Request aborted",y.ECONNABORTED,t,f)),f=null)},f.onerror=function(){n(new y("Network Error",y.ERR_NETWORK,t,f)),f=null},f.ontimeout=function(){let m=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const R=t.transitional||ve;t.timeoutErrorMessage&&(m=t.timeoutErrorMessage),n(new y(m,R.clarifyTimeoutError?y.ETIMEDOUT:y.ECONNABORTED,t,f)),f=null},S.isStandardBrowserEnv){const A=(t.withCredentials||rr(d))&&t.xsrfCookieName&&Zt.read(t.xsrfCookieName);A&&s.set(t.xsrfHeaderName,A)}i===void 0&&s.setContentType(null),"setRequestHeader"in f&&l.forEach(s.toJSON(),function(m,R){f.setRequestHeader(R,m)}),l.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),a&&a!=="json"&&(f.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&f.addEventListener("progress",He(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",He(t.onUploadProgress)),(t.cancelToken||t.signal)&&(u=A=>{!f||(n(!A||A.type?new v(null,t,f):A),f.abort(),f=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u)));const x=nr(d);if(x&&S.protocols.indexOf(x)===-1){n(new y("Unsupported protocol "+x+":",y.ERR_BAD_REQUEST,t));return}f.send(i||null)})};const J={http:Nt,xhr:sr};l.forEach(J,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});var ar={getAdapter:t=>{t=l.isArray(t)?t:[t];const{length:e}=t;let r,n;for(let i=0;i<e&&(r=t[i],!(n=l.isString(r)?J[r.toLowerCase()]:r));i++);if(!n)throw n===!1?new y(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(l.hasOwnProp(J,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!l.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:J};function ce(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new v(null,t)}function Xe(t){return ce(t),t.headers=L.from(t.headers),t.data=fe.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ar.getAdapter(t.adapter||ue.adapter)(t).then(function(n){return ce(t),n.data=fe.call(t,t.transformResponse,n),n.headers=L.from(n.headers),n},function(n){return ze(n)||(ce(t),n&&n.response&&(n.response.data=fe.call(t,t.transformResponse,n.response),n.response.headers=L.from(n.response.headers))),Promise.reject(n)})}const Ye=t=>t instanceof L?t.toJSON():t;function P(t,e){e=e||{};const r={};function n(f,d,p){return l.isPlainObject(f)&&l.isPlainObject(d)?l.merge.call({caseless:p},f,d):l.isPlainObject(d)?l.merge({},d):l.isArray(d)?d.slice():d}function i(f,d,p){if(l.isUndefined(d)){if(!l.isUndefined(f))return n(void 0,f,p)}else return n(f,d,p)}function s(f,d){if(!l.isUndefined(d))return n(void 0,d)}function a(f,d){if(l.isUndefined(d)){if(!l.isUndefined(f))return n(void 0,f)}else return n(void 0,d)}function u(f,d,p){if(p in e)return n(f,d);if(p in t)return n(void 0,f)}const h={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(f,d)=>i(Ye(f),Ye(d),!0)};return l.forEach(Object.keys(Object.assign({},t,e)),function(d){const p=h[d]||i,x=p(t[d],e[d],d);l.isUndefined(x)&&p!==u||(r[d]=x)}),r}const Ke="1.4.0",he={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{he[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const qe={};he.transitional=function(e,r,n){function i(s,a){return"[Axios v"+Ke+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,u)=>{if(e===!1)throw new y(i(a," has been removed"+(r?" in "+r:"")),y.ERR_DEPRECATED);return r&&!qe[a]&&(qe[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,u):!0}};function or(t,e,r){if(typeof t!="object")throw new y("options must be an object",y.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],a=e[s];if(a){const u=t[s],h=u===void 0||a(u,s,t);if(h!==!0)throw new y("option "+s+" must be "+h,y.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new y("Unknown option "+s,y.ERR_BAD_OPTION)}}var de={assertOptions:or,validators:he};const D=de.validators;class ${constructor(e){this.defaults=e,this.interceptors={request:new Ve,response:new Ve}}request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=P(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&de.assertOptions(n,{silentJSONParsing:D.transitional(D.boolean),forcedJSONParsing:D.transitional(D.boolean),clarifyTimeoutError:D.transitional(D.boolean)},!1),i!=null&&(l.isFunction(i)?r.paramsSerializer={serialize:i}:de.assertOptions(i,{encode:D.function,serialize:D.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a;a=s&&l.merge(s.common,s[r.method]),a&&l.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),r.headers=L.concat(a,s);const u=[];let h=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(r)===!1||(h=h&&R.synchronous,u.unshift(R.fulfilled,R.rejected))});const f=[];this.interceptors.response.forEach(function(R){f.push(R.fulfilled,R.rejected)});let d,p=0,x;if(!h){const m=[Xe.bind(this),void 0];for(m.unshift.apply(m,u),m.push.apply(m,f),x=m.length,d=Promise.resolve(r);p<x;)d=d.then(m[p++],m[p++]);return d}x=u.length;let A=r;for(p=0;p<x;){const m=u[p++],R=u[p++];try{A=m(A)}catch(N){R.call(this,N);break}}try{d=Xe.call(this,A)}catch(m){return Promise.reject(m)}for(p=0,x=f.length;p<x;)d=d.then(f[p++],f[p++]);return d}getUri(e){e=P(this.defaults,e);const r=We(e.baseURL,e.url);return ke(r,e.params,e.paramsSerializer)}}l.forEach(["delete","get","head","options"],function(e){$.prototype[e]=function(r,n){return this.request(P(n||{},{method:e,url:r,data:(n||{}).data}))}}),l.forEach(["post","put","patch"],function(e){function r(n){return function(s,a,u){return this.request(P(u||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}$.prototype[e]=r(),$.prototype[e+"Form"]=r(!0)});var Q=$;class me{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(u=>{n.subscribe(u),s=u}).then(i);return a.cancel=function(){n.unsubscribe(s)},a},e(function(s,a,u){n.reason||(n.reason=new v(s,a,u),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new me(function(i){e=i}),cancel:e}}}var ur=me;function lr(t){return function(r){return t.apply(null,r)}}function fr(t){return l.isObject(t)&&t.isAxiosError===!0}const pe={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pe).forEach(([t,e])=>{pe[e]=t});var cr=pe;function Je(t){const e=new Q(t),r=F(Q.prototype.request,e);return l.extend(r,Q.prototype,e,{allOwnKeys:!0}),l.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return Je(P(t,i))},r}const E=Je(ue);E.Axios=Q,E.CanceledError=v,E.CancelToken=ur,E.isCancel=ze,E.VERSION=Ke,E.toFormData=X,E.AxiosError=y,E.Cancel=E.CanceledError,E.all=function(e){return Promise.all(e)},E.spread=lr,E.isAxiosError=fr,E.mergeConfig=P,E.AxiosHeaders=L,E.formToJSON=t=>Ge(l.isHTMLForm(t)?new FormData(t):t),E.HttpStatusCode=cr,E.default=E;var Z=E;const G=O;var T={};T[G.R8G8B8A8_UBYTE]={internalFormat:WebGL2RenderingContext.RGBA8,format:WebGL2RenderingContext.RGBA,type:WebGL2RenderingContext.UNSIGNED_BYTE,components:4,dataType:"Integer",size:1},T[G.R32_SFLOAT]={internalFormat:WebGL2RenderingContext.R32F,format:WebGL2RenderingContext.RED,type:WebGL2RenderingContext.FLOAT,components:1,dataType:"Float_Point",size:4},T[G.R32G32_SFLOAT]={internalFormat:WebGL2RenderingContext.RG32F,format:WebGL2RenderingContext.RG,type:WebGL2RenderingContext.FLOAT,components:2,dataType:"Float_Point",size:4},T[G.R32G32B32_SFLOAT]={internalFormat:WebGL2RenderingContext.RGB32F,format:WebGL2RenderingContext.RGB,type:WebGL2RenderingContext.FLOAT,components:3,dataType:"Float_Point",size:4},T[G.R32G32B32A32_SFLOAT]={internalFormat:WebGL2RenderingContext.RGBA32F,format:WebGL2RenderingContext.RGBA,type:WebGL2RenderingContext.FLOAT,components:4,dataType:"Float_Point",size:4};function $e(){return new Worker("/FowFieldVisualization_Demo/assets/readPixels.worker.42403acd.js")}class Re{constructor(e,r){c(this,"target");c(this,"flip");c(this,"width");c(this,"height");c(this,"format");c(this,"depth");c(this,"mipLevels");c(this,"arrayLayers");c(this,"masterManager");c(this,"ID",0);c(this,"isReady",!1);this.masterManager=r,this.target=e.target,this.flip=e.flip?e.flip:!1,this.width=e.width?e.width:0,this.height=e.height?e.height:0,this.format=e.format,this.depth=e.depth?e.depth:1,this.mipLevels=e.mipLevels?e.mipLevels:1,this.arrayLayers=e.arrayLayers?e.arrayLayers:1}static Create(e,r,n){let i=new Re(r,n);return i.ID=e.createTexture(),i.width!==0&&i.height!==0&&(e.bindTexture(i.target,i.ID),e.texStorage2D(i.target,i.mipLevels,T[i.format].internalFormat,i.width,i.height),e.bindTexture(r.target,null)),i}FillByBuffer(e,r,n,i,s){let a=T[this.format];e.bindBuffer(e.PIXEL_UNPACK_BUFFER,s),e.bindTexture(this.target,this.ID),this.flip&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(this.target,r,a.internalFormat,n,i,0,a.format,a.type,0),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),this.mipLevels>1&&e.generateMipmap(this.target),e.bindBuffer(e.PIXEL_UNPACK_BUFFER,null),e.bindTexture(this.target,null)}async FillByImage(e,r,n,i,s){this.masterManager.Lock(),this.width=i,this.height=s,e.bindTexture(this.target,this.ID),e.texStorage2D(this.target,this.mipLevels,T[this.format].internalFormat,this.width,this.height),e.bindTexture(this.target,null);const a=T[this.format],u=this;let h="from-image";if(u.flip&&(h="flipY"),a.dataType==="Float_Point"){const f=new $e;f.postMessage([0,n,h]),f.onmessage=function(d){e.bindTexture(u.target,u.ID),e.texSubImage2D(u.target,r,0,0,i,s,a.format,a.type,new Float32Array(d.data)),u.mipLevels>1&&e.generateMipmap(u.target),e.bindTexture(u.target,null),e.finish(),f.postMessage([1]),f.terminate(),u.masterManager.Unlock()}}else Z.get(n,{responseType:"blob"}).then(f=>{createImageBitmap(f.data,{imageOrientation:h,premultiplyAlpha:"none",colorSpaceConversion:"default"}).then(d=>{e.bindTexture(u.target,u.ID),e.texSubImage2D(u.target,r,0,0,i,s,a.format,a.type,d),u.mipLevels>1&&e.generateMipmap(u.target),e.bindTexture(u.target,null),e.finish(),u.masterManager.Unlock()})}).catch(f=>{console.log("ERROR::TEXTURE_NOT_LOAD_BY_URL",f.toJSON())})}FillByData(e,r,n,i,s){let a=T[this.format];e.bindTexture(this.target,this.ID),this.flip&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(this.target,r,a.internalFormat,n,i,0,a.format,a.type,s),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),this.mipLevels>1&&e.generateMipmap(this.target),e.bindTexture(this.target,null)}UpdateByBuffer(e,r,n,i,s,a){e.bindTexture(this.target,this.ID),e.texSubImage2D(this.target,r,n,i,s,a,T[this.format].format,T[this.format].type,0),e.bindTexture(this.target,null)}UpdateByData(e,r,n,i,s,a,u){e.bindTexture(this.target,this.ID),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.texSubImage2D(this.target,r,n,i,s,a,T[this.format].format,T[this.format].type,u),e.bindTexture(this.target,null)}UpdateByImage(e,r,n){this.masterManager.Lock();const i=T[this.format],s=this;let a="from-image";if(s.flip&&(a="flipY"),i.dataType==="Float_Point"){const u=new $e;u.postMessage([0,n,a]),u.onmessage=function(h){e.bindTexture(s.target,s.ID),e.texSubImage2D(s.target,r,0,0,s.width,s.height,i.format,i.type,new Float32Array(h.data)),s.mipLevels>1&&e.generateMipmap(s.target),e.bindTexture(s.target,null),e.finish(),u.postMessage([1]),u.terminate(),s.masterManager.Unlock()}}else Z.get(n,{responseType:"blob"}).then(u=>{createImageBitmap(u.data,{imageOrientation:a,premultiplyAlpha:"none",colorSpaceConversion:"default"}).then(h=>{e.bindTexture(s.target,s.ID),e.texSubImage2D(s.target,r,0,0,s.width,s.height,i.format,i.type,h),s.mipLevels>1&&e.generateMipmap(s.target),e.bindTexture(s.target,null),e.finish(),s.masterManager.Unlock()})}).catch(u=>{console.log("ERROR::TEXTURE_NOT_LOAD_BY_URL",u.toJSON())})}Bind(e,r){e.activeTexture(e.TEXTURE0+r),e.bindTexture(this.target,this.ID)}Delete(e){e.deleteTexture(this.ID)}}class ye{constructor(e){c(this,"texture");c(this,"viewType");c(this,"format");c(this,"baseMipLevel");c(this,"levelCount");c(this,"baseArrayLayer");c(this,"layerCount");this.texture=e.texture,this.viewType=e.viewType,this.format=e.format,this.baseMipLevel=e.baseMipLevel?e.baseMipLevel:0,this.levelCount=e.levelCount?e.levelCount:1,this.baseArrayLayer=e.baseArrayLayer?e.baseArrayLayer:0,this.layerCount=e.layerCount?e.layerCount:1}static Create(e){return new ye(e)}Bind(e,r){this.texture.Bind(e,r)}Delete(e){this.texture.Delete(e)}}class Ae{constructor(e){c(this,"magFilter");c(this,"minFilter");c(this,"addressModeU");c(this,"addressModeV");c(this,"addressModeW");c(this,"ID",0);this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.addressModeU=e.addressModeU,this.addressModeV=e.addressModeV,this.addressModeW=e.addressModeW}static Create(e,r){let n=new Ae(r);return n.ID=e.createSampler(),e.samplerParameteri(n.ID,e.TEXTURE_MAG_FILTER,n.magFilter),e.samplerParameteri(n.ID,e.TEXTURE_MIN_FILTER,n.minFilter),e.samplerParameteri(n.ID,e.TEXTURE_WRAP_S,n.addressModeU),e.samplerParameteri(n.ID,e.TEXTURE_WRAP_T,n.addressModeV),n.addressModeW&&e.samplerParameteri(n.ID,e.TEXTURE_WRAP_R,n.addressModeW),n}Bind(e,r){e.bindSampler(r,this.ID)}Delete(e){e.deleteSampler(this.ID)}}class ge{constructor(e){c(this,"textureView");c(this,"sampler");this.textureView=e.textureView,this.sampler=e.sampler}static Create(e){return new ge(e)}Bind(e,r){this.textureView.Bind(e,r),this.sampler.Bind(e,r)}Delete(e){this.textureView.Delete(e),this.sampler.Delete(e)}}class Ee{constructor(e,r,n){c(this,"textureView_array");c(this,"sampler_array");c(this,"texture_array");c(this,"rc",null);c(this,"lockCount",0);this.textureView_array=new Array(e).fill(null),this.sampler_array=new Array(r).fill(null),this.texture_array=new Array(n).fill(null)}static Create(e,r,n){return new Ee(e,r,n)}SetContext(e){this.rc=e}Delete(){this.texture_array.forEach((e,r)=>{e!==null&&e.texture.Delete(this.rc),this.texture_array[r]=null}),this.textureView_array.forEach((e,r)=>{e!==null&&e.Delete(this.rc),this.textureView_array[r]=null}),this.sampler_array.forEach((e,r)=>{e!==null&&e.Delete(this.rc),this.sampler_array[r]=null})}Empty(){var e,r;for(let n=0;n<this.texture_array.length;n++)this.texture_array[n]!=null&&((e=this.texture_array[n])==null||e.texture.textureView.Delete(this.rc),this.texture_array[n]=null);for(let n=0;n<this.sampler_array.length;n++)this.sampler_array[n]!=null&&((r=this.sampler_array[n])==null||r.Delete(this.rc),this.sampler_array[n]=null);for(let n=0;n<this.textureView_array.length;n++)this.textureView_array[n]!=null&&(this.textureView_array[n]=null)}AddTextureView(e){let r=!1,n;for(n=0;n<this.textureView_array.length;n++)if(this.textureView_array[n]===null){r=!0;break}return r?(this.textureView_array[n]=this.CreateTextureView(e),n):(console.log("ERROR::TEXTURE_MANAGER::TEXTUREVIEW_ARRAY_OVERFLOW!"),this.textureView_array.length)}AddSampler(e){let r=!1,n;for(n=0;n<this.textureView_array.length;n++)if(this.sampler_array[n]===e)return n;for(n=0;n<this.sampler_array.length;n++)if(this.sampler_array[n]===null){r=!0;break}return r?(this.sampler_array[n]=Ae.Create(this.rc,e),n):(console.log("ERROR::TEXTURE_MANAGER::SAMPLER_ARRAY_OVERFLOW!"),this.sampler_array.length)}SetTexture(e,r){if(e>=this.textureView_array.length||r>=this.sampler_array.length||this.textureView_array[e]===null||this.sampler_array[r]===null)return console.log("ERROR::TEXTURE_MANAGER::TEXTUREVIEW_OR_SAMPLER_CANNOT_FOUND!"),this.texture_array.length;let n=!1,i;for(i=0;i<this.texture_array.length;i++)if(this.texture_array[i]===null){n=!0;break}return n?(this.texture_array[i]={texture:ge.Create({textureView:this.textureView_array[e],sampler:this.sampler_array[r]}),viewID:e,samplerID:r},i):(console.log("ERROR::TEXTURE_MANAGER::TEXTURE_ARRAY_OVERFLOW!"),this.texture_array.length)}GetTextureViewLength(){let e=0;for(let r=0;r<this.textureView_array.length;r++)this.textureView_array[r]!=null&&e++;return e}DeleteTexture(e){var r;return e>=this.texture_array.length||this.texture_array[e]===null?(console.log("ERROR::TEXTURE_MANAGER::TEXTUREVIEW_CANNOT_FOUND!"),!1):((r=this.texture_array[e])==null||r.texture.textureView.Delete(this.rc),this.texture_array[e]=null,!0)}BindTexture(e,r){var n;if(e.length!==r.length){console.log("ERROR::TEXTURE_MANAGER::TEXTURE_ID_AND_UNITS_NOT_EQUAL!");return}for(let i=0;i<e.length;i++)(n=this.texture_array[e[i]])==null||n.texture.Bind(this.rc,r[i])}GetTexture(e){return this.texture_array[e]===null?(console.log("ERROR::TEXTURE_MANAGER::TEXTUR_CANNOT_FOUND!"),null):this.texture_array[e]}GetTextureView(e){return this.textureView_array[e]===null?(console.log("ERROR::TEXTURE_MANAGER::TEXTUREVIEW_CANNOT_FOUND!"),null):this.textureView_array[e]}CreateTextureData(e){return Re.Create(this.rc,e,this)}CreateTextureView(e){return e.textureDataInfo&&(e.texture=this.CreateTextureData(e.textureDataInfo)),ye.Create(e)}async FillTextureDataByImage(e,r,n,i,s){await this.textureView_array[this.GetTexture(e).viewID].texture.FillByImage(this.rc,r,n,i,s)}UpdateDataBySource(e,r,n,i,s,a,u){this.textureView_array[this.GetTexture(e).viewID].texture.UpdateByData(this.rc,r,n,i,s,a,u)}UpdateDataByBuffer(e,r,n,i,s,a){this.textureView_array[this.GetTexture(e).viewID].texture.UpdateByBuffer(this.rc,r,n,i,s,a)}Lock(){this.lockCount+=1}Unlock(){this.lockCount-=1}IsBusy(){return this.lockCount}UpdateDataByImage(e,r,n){this.textureView_array[this.GetTexture(e).viewID].texture.UpdateByImage(this.rc,n,r)}}class hr{constructor(e,r,n,i){c(this,"name");c(this,"gl",null);c(this,"shaderProgram");this.name=r||"",this.gl=e;const s=e.createProgram();if(!s){console.log("ERROR::Shader program cannot be created!"),this.shaderProgram=null;return}[e.VERTEX_SHADER,e.FRAGMENT_SHADER].forEach((a,u)=>{const h=this.createShader(a,n[u]);!h||e.attachShader(s,h)}),i&&i.length!=0&&e.transformFeedbackVaryings(s,i,e.SEPARATE_ATTRIBS),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)?this.shaderProgram=s:(console.log(e.getProgramInfoLog(s)),e.deleteProgram(s),this.shaderProgram=null)}createShader(e,r){const n=this.gl.createShader(e);return n?(this.gl.shaderSource(n,r),this.gl.compileShader(n),this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?n:(console.log(this.gl.getShaderInfoLog(n)),this.gl.deleteShader(n),null)):null}use(){this.gl.useProgram(this.shaderProgram)}setVertexBufferPointer(e,r,n,i,s,a){this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(e,r,n,i,s,a)}setVertexBufferPointer_Instancing(e,r,n,i,s,a,u=1){this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(e,r,n,i,s,a),this.gl.vertexAttribDivisor(e,u)}breakVertexBufferLink(e){this.gl.disableVertexAttribArray(e)}setFloat(e,r){const n=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniform1f(n,r)}setInt(e,r){const n=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniform1i(n,r)}setVec1i(e,r){const n=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniform1iv(n,r)}setFloat2(e,r,n){const i=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniform2f(i,r,n)}setFloat3(e,r,n,i){const s=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniform3f(s,r,n,i)}setFloat4(e,r,n,i,s){const a=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniform4f(a,r,n,i,s)}setVec4(e,r){const n=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniform4fv(n,r)}setMat4(e,r){const n=this.gl.getUniformLocation(this.shaderProgram,e);this.gl.uniformMatrix4fv(n,!1,r)}setUniformBlock(e,r){const n=this.gl.getUniformBlockIndex(this.shaderProgram,e);this.gl.uniformBlockBinding(this.shaderProgram,n,r)}delete(){this.gl.deleteProgram(this.shaderProgram),this.gl=null}}let g,Qe,o;const ee=O,b=Ee.Create(200,16,200),xe=(t,e)=>(e||(e=t,t=0),Math.random()*(e-t)+t);async function dr(t,e,r,n,i){const s=await Z.get(r).then(u=>u.data).catch(u=>{console.log("ERROR::SHADER_NOT_LOAD_BY_URL",u.toJSON())}),a=await Z.get(n).then(u=>u.data).catch(u=>{console.log("ERROR::SHADER_NOT_LOAD_BY_URL",u.toJSON())});return new hr(t,e,[s,a],i)}function te(t,e,r,n){const i=t.createBuffer();return i==null?(console.log("ERROR::Vertex Buffer cannot be created!"),i):(t.bindBuffer(e,i),t.bufferData(e,r,n),t.bindBuffer(e,null),i)}class Te{constructor(){c(this,"simulationVAO",0);c(this,"simulationVAO2",0);c(this,"XFBO",0);c(this,"XFBO2",0);c(this,"sVAO",0);c(this,"xfBO",0);c(this,"simulationBuffer",0);c(this,"lifeBuffer",0);c(this,"xfSimulationBuffer",0);c(this,"xfLifeBuffer",0);c(this,"unPackBuffer",0);c(this,"lifeDataBuffer",0);c(this,"UBO",0);c(this,"updateShader");c(this,"beginBlock",-1);c(this,"maxBlockSize",0);c(this,"_timeCount",0);c(this,"timeLast",10);c(this,"phaseCount",0);c(this,"flowFieldTextureSize",[0,0]);c(this,"flowFieldResourceArray",[]);c(this,"flowFieldTextureInfo",[]);c(this,"seedingTextureSize",[0,0]);c(this,"seedingResourceArray",[]);c(this,"seedingTextureInfo",[]);c(this,"flowfieldTextureArray",[0,0,0]);c(this,"seedingTextureArray",[0,0,0]);c(this,"uboMapBuffer");c(this,"flowBoundary");c(this,"textureArraySize",0);c(this,"isSuspended",!1);c(this,"particleMapBuffer");c(this,"aliveIndexData");c(this,"lifeData");c(this,"aliveLineNum",0);c(this,"trajectoryNum",65536);c(this,"segmentNum",16);c(this,"fullLife",this.segmentNum*10);c(this,"maxTrajectoryNum",this.trajectoryNum);c(this,"_progressRate",0);c(this,"speedFactor",2);c(this,"dropRate",.003);c(this,"dropRateBump",.001);c(this,"fillWidth",1);c(this,"aaWidth",1);c(this,"primitive",1);c(this,"isUnsteady",!0);this.updateShader=null,this.flowBoundary=[],this.uboMapBuffer=new Float32Array(12),this.lifeData=new Float32Array(0),this.aliveIndexData=new Float32Array(0),this.particleMapBuffer=new Float32Array(0)}static Create(){return new Te}async ResourceFileParsing(e){this.flowBoundary=e.flowBoundary,this.uboMapBuffer[8]=this.flowBoundary[0],this.uboMapBuffer[9]=this.flowBoundary[1],this.uboMapBuffer[10]=this.flowBoundary[2],this.uboMapBuffer[11]=this.flowBoundary[3],this.maxTrajectoryNum=e.maxTrajectoryNum,this.segmentNum=e.maxSegmentNum,this.maxBlockSize=Math.ceil(Math.sqrt(this.maxTrajectoryNum)),this.flowFieldTextureSize=e.flowFieldTextureSize,this.seedingTextureSize=e.seedingTextureSize,this.flowFieldResourceArray=e.flowFieldResourceArray,this.seedingResourceArray=e.seedingResourceArray}async Prepare(){const e={textureDataInfo:{target:o.TEXTURE_2D,flip:!0,format:ee.R32G32_SFLOAT},viewType:o.TEXTURE_2D,format:ee.R32G32_SFLOAT},r={textureDataInfo:{target:o.TEXTURE_2D,flip:!0,format:ee.R8G8B8A8_UBYTE},viewType:o.TEXTURE_2D,format:ee.R8G8B8A8_UBYTE},n=b.AddSampler({magFilter:o.NEAREST,minFilter:o.NEAREST,addressModeU:o.CLAMP_TO_EDGE,addressModeV:o.CLAMP_TO_EDGE}),i=b.AddSampler({magFilter:o.LINEAR,minFilter:o.LINEAR,addressModeU:o.CLAMP_TO_EDGE,addressModeV:o.CLAMP_TO_EDGE});this.phaseCount=this.flowFieldResourceArray.length,this.timeLast=this.phaseCount*300,this.textureArraySize=3;for(let a=0;a<this.textureArraySize;a++){const u=b.SetTexture(b.AddTextureView(e),i);this.flowfieldTextureArray[a]=u,await b.FillTextureDataByImage(u,0,this.flowFieldResourceArray[a],this.flowFieldTextureSize[0],this.flowFieldTextureSize[1]);const h=b.SetTexture(b.AddTextureView(r),n);this.seedingTextureArray[a]=h,await b.FillTextureDataByImage(h,0,this.seedingResourceArray[a],this.seedingTextureSize[0],this.seedingTextureSize[1])}this.particleMapBuffer=new Float32Array(this.maxBlockSize*this.maxBlockSize*3).fill(0);for(let a=0;a<this.maxTrajectoryNum;a++)this.particleMapBuffer[a*3+0]=xe(0,1),this.particleMapBuffer[a*3+1]=xe(0,1),this.particleMapBuffer[a*3+2]=xe(0,1);const s=new Float32Array(this.maxTrajectoryNum);for(let a=0;a<this.maxTrajectoryNum;a++)s[a]=this.fullLife;this.lifeData=new Float32Array(this.maxTrajectoryNum),this.aliveIndexData=new Float32Array(this.maxTrajectoryNum),this.simulationBuffer=te(o,o.ARRAY_BUFFER,this.particleMapBuffer,o.DYNAMIC_DRAW),this.xfSimulationBuffer=te(o,o.ARRAY_BUFFER,this.particleMapBuffer,o.DYNAMIC_DRAW),this.lifeBuffer=te(o,o.ARRAY_BUFFER,s,o.DYNAMIC_DRAW),this.xfLifeBuffer=te(o,o.ARRAY_BUFFER,s,o.DYNAMIC_DRAW),this.UBO=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,this.UBO),o.bufferData(o.ARRAY_BUFFER,48,o.DYNAMIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,null),this.simulationVAO=o.createVertexArray(),o.bindVertexArray(this.simulationVAO),o.bindBuffer(o.ARRAY_BUFFER,this.simulationBuffer),o.vertexAttribPointer(0,3,o.FLOAT,!1,3*4,0),o.enableVertexAttribArray(0),o.bindBuffer(o.ARRAY_BUFFER,this.lifeBuffer),o.vertexAttribPointer(1,1,o.FLOAT,!1,1*4,0),o.enableVertexAttribArray(1),o.bindVertexArray(null),o.bindBuffer(o.ARRAY_BUFFER,null),this.simulationVAO2=o.createVertexArray(),o.bindVertexArray(this.simulationVAO2),o.bindBuffer(o.ARRAY_BUFFER,this.xfSimulationBuffer),o.vertexAttribPointer(0,3,o.FLOAT,!1,3*4,0),o.enableVertexAttribArray(0),o.bindBuffer(o.ARRAY_BUFFER,this.xfLifeBuffer),o.vertexAttribPointer(1,1,o.FLOAT,!1,1*4,0),o.enableVertexAttribArray(1),o.bindVertexArray(null),o.bindBuffer(o.ARRAY_BUFFER,null),this.XFBO=o.createTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,this.XFBO),o.bindBuffer(o.TRANSFORM_FEEDBACK_BUFFER,this.xfSimulationBuffer),o.bindBufferRange(o.TRANSFORM_FEEDBACK_BUFFER,0,this.xfSimulationBuffer,0,this.maxBlockSize*this.maxBlockSize*12),o.bindBuffer(o.TRANSFORM_FEEDBACK_BUFFER,this.xfLifeBuffer),o.bindBufferRange(o.TRANSFORM_FEEDBACK_BUFFER,1,this.xfLifeBuffer,0,this.maxBlockSize*this.maxBlockSize*4),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null),o.bindBuffer(o.TRANSFORM_FEEDBACK_BUFFER,null),this.XFBO2=o.createTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,this.XFBO2),o.bindBuffer(o.TRANSFORM_FEEDBACK_BUFFER,this.simulationBuffer),o.bindBufferRange(o.TRANSFORM_FEEDBACK_BUFFER,0,this.simulationBuffer,0,this.maxBlockSize*this.maxBlockSize*12),o.bindBuffer(o.TRANSFORM_FEEDBACK_BUFFER,this.lifeBuffer),o.bindBufferRange(o.TRANSFORM_FEEDBACK_BUFFER,1,this.lifeBuffer,0,this.maxBlockSize*this.maxBlockSize*4),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null),o.bindBuffer(o.TRANSFORM_FEEDBACK_BUFFER,null),this.updateShader=await dr(o,"update","https://ycsoku.github.io/FFV_Database/shaders/update.vert","https://ycsoku.github.io/FFV_Database/shaders/update.frag",["newInfo","aliveTime"])}resourceLoad(e,r){b.UpdateDataByImage(this.flowfieldTextureArray[e],this.flowFieldResourceArray[r],0),b.UpdateDataByImage(this.seedingTextureArray[e],this.seedingResourceArray[r],0)}set timeCount(e){this._timeCount=e%this.timeLast}get timeCount(){return this._timeCount}set progressRate(e){const r=Math.floor(this._progressRate*this.phaseCount),n=Math.floor(e*this.phaseCount)%this.phaseCount,i=(n+2)%this.phaseCount;this._progressRate=e,this.flowFieldTextureInfo=this.getFieldTextures(),this.seedingTextureInfo=this.getMaskTextures(),this.uboMapBuffer[0]=this.getProgressBetweenTexture(),n!=r&&this.resourceLoad(i%this.textureArraySize,i)}get progressRate(){return this._progressRate}getFieldTextures(){const e=Math.floor(this.progressRate*this.phaseCount),r=(e+1)%this.phaseCount;return[this.flowfieldTextureArray[e%this.textureArraySize],this.flowfieldTextureArray[r%this.textureArraySize]]}getMaskTextures(){const e=Math.floor(this.progressRate*this.phaseCount),r=(e+1)%this.phaseCount;return[this.seedingTextureArray[e%this.textureArraySize],this.seedingTextureArray[r%this.textureArraySize]]}getProgressBetweenTexture(){const e=this.progressRate*this.phaseCount;return e-Math.floor(e)}bindUBO(e,r){e.bindBuffer(e.UNIFORM_BUFFER,this.UBO),e.bufferSubData(e.UNIFORM_BUFFER,0,this.uboMapBuffer),e.bindBufferRange(e.UNIFORM_BUFFER,r,this.UBO,0,this.uboMapBuffer.length*4)}async swap(){this.beginBlock%2==0?(this.sVAO=this.simulationVAO,this.xfBO=this.XFBO,this.unPackBuffer=this.simulationBuffer,this.lifeDataBuffer=this.lifeBuffer):(this.sVAO=this.simulationVAO2,this.xfBO=this.XFBO2,this.unPackBuffer=this.xfSimulationBuffer,this.lifeDataBuffer=this.xfLifeBuffer)}tickLogicCount(){this.swap(),this.beginBlock=(this.beginBlock+1)%this.segmentNum,this.isUnsteady&&!b.IsBusy()&&(this.progressRate=this.timeCount/this.timeLast,this.timeCount=this.timeCount+1),this.uboMapBuffer[1]=this.segmentNum,this.uboMapBuffer[2]=this.segmentNum*10,this.uboMapBuffer[3]=this.dropRate,this.uboMapBuffer[4]=this.dropRateBump,this.uboMapBuffer[5]=this.speedFactor*.01*100}tickRender(){if(this.bindUBO(o,0),o.bindVertexArray(this.sVAO),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,this.xfBO),b.BindTexture([this.flowFieldTextureInfo[0],this.flowFieldTextureInfo[1],this.seedingTextureInfo[0],this.seedingTextureInfo[1]],[0,1,2,3]),this.updateShader.use(),this.updateShader.setVec1i("flowField",[0,1]),this.updateShader.setVec1i("mask",[2,3]),this.updateShader.setFloat("randomSeed",Math.random()),this.updateShader.setUniformBlock("FlowFieldUniforms",0),o.enable(o.RASTERIZER_DISCARD),o.beginTransformFeedback(o.POINTS),o.drawArrays(o.POINTS,0,this.trajectoryNum),o.endTransformFeedback(),o.disable(o.RASTERIZER_DISCARD),o.bindVertexArray(null),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null),o.bindBuffer(o.ARRAY_BUFFER,this.unPackBuffer),o.getBufferSubData(o.ARRAY_BUFFER,0,this.particleMapBuffer,0,this.trajectoryNum*3),o.bindBuffer(o.ARRAY_BUFFER,this.lifeDataBuffer),o.getBufferSubData(o.ARRAY_BUFFER,0,this.lifeData,0,this.trajectoryNum),o.bindBuffer(o.ARRAY_BUFFER,null),o.finish(),this.aliveLineNum=0,this.primitive==0)for(let e=0;e<this.trajectoryNum;e++)this.lifeData[e]<this.segmentNum*10&&(this.aliveIndexData[this.aliveLineNum]=e,this.aliveLineNum+=1);else for(let e=0;e<this.trajectoryNum;e++)this.lifeData[e]<this.segmentNum*9&&(this.aliveIndexData[this.aliveLineNum]=e,this.aliveLineNum+=1)}}g=Te.Create(),onmessage=async function(t){switch(t.data[0]){case-1:await g.ResourceFileParsing(t.data[1]),this.postMessage([-1]);break;case 0:Qe=new OffscreenCanvas(0,0),o=Qe.getContext("webgl2");const e=o.getSupportedExtensions();for(const r of e)o.getExtension(r);b.SetContext(o),await g.Prepare(),this.postMessage([0]);break;case 1:if(g.isSuspended)break;g.tickLogicCount(),g.tickRender(),t.data[1]=g.particleMapBuffer.buffer,t.data[2]=g.aliveIndexData,this.postMessage([1,g.beginBlock,g.particleMapBuffer,g.aliveLineNum,g.aliveIndexData]);break;case 2:g.trajectoryNum=t.data[1].lineNum,g.fullLife=t.data[1].fullLife,g.speedFactor=t.data[1].speedFactor,g.dropRate=t.data[1].dropRate,g.dropRateBump=t.data[1].dropRateBump,g.fillWidth=t.data[1].fillWidth,g.aaWidth=t.data[1].aaWidth,g.isUnsteady=t.data[1].isUnsteady,g.primitive=t.data[1].primitive;break;case 3:g.progressRate=t.data[1];break;case 4:g.isSuspended=t.data[1];break}}})();
